[tox]
envlist =
	{py37,py38}-quart
	{py36,py37,py38}-flask-{1.1,1.0,0.11,0.12,dev}
isolated_build = true

[testenv]
setenv =
	PYTHONWARNINGS = all
	# When using Poetry with Tox, Pytest starts acting up. This variable was introduced largely
	# because of the issues caused when using tox, see https://github.com/pytest-dev/pytest/issues/2042
	PY_IGNORE_IMPORTMISMATCH = 1

extras =
	flask: flask
	quart: quart
	# There is a pytest extra, that provides required plugins like pytest-asyncio
	pytest: pytest

deps =
	pytest

	quart: quart>=0.12.0
	flask-0.11: Flask>=0.11,<0.12
	flask-0.12: Flask>=0.12,<0.13
	flask-1.0: Flask>=1.0,<1.1
	flask-1.1: Flask>=1.1,<1.2
	flask-dev: git+https://github.com/pallets/flask.git#egg=flask

commands =
	pytest {posargs}
